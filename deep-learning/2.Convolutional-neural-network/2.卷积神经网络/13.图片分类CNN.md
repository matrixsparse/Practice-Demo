# 图片分类 CNN

卷积层可以检测图片中的区域性规律，最大池化层出现在卷积层之后，可以降低数组的维数

这些数组和更加熟悉的完全连接层，经常是你在CNN中唯一会遇到的层级

我们将侧重于图片分类CNN，CNN必须将图片数组作为输入，如果要处理混乱的现实图片，那么将遇到我们尚未讨论的一个难点，如果我上网手机数千张或数百万张图片，那么很有可能这些图片大小各不相同和MLP相似，我们要讨论的CNN需要固定大小的输入，因为我们需要选择一个图片大小

并将所有图片处理成这一大小，然后才能执行任何其他操作

我们经常会重新调整图片的大小，变成正方形，并使空间维度等于2的幂次方

或者可以被2的幂次方整除的数，我们要处理的数据集包含的图片均已重新调整大小，变成32*32

计算机会将任何图片解读为三维数组，彩色图片具有宽高像素

并沿着红色、绿色和蓝色通道，对应深度3

灰度图片虽然本质上是二维的，但是也可以看做具有自己的宽和高，而深度是1

对于彩色或灰度图片，输入数组的宽和高始终会大于深度，我们的CNN架构的设计目标是获取该输入

然后逐渐使其深度大于宽和高，卷积层将用于使穿过卷积层的数组更深，最大池化层将用于减小空间维度

要了解背后的工作原理，看看下面的输入层，后面跟着一系列的卷积层，这个堆栈将发现图片中的空间规律层级

每个卷积层都需要我们指定超参数数量，例如，过滤器经常是正方形，大小范围从2*2到5*5

stride通常设为1在keras中1是默认值，对于填充，如果将其设为'same'，我们认为你将获得更好的结果

在keras中这不是默认值，将stride设为1并将填充设为'same'，将使卷积层的宽和高，与上一层级的相同

对于过滤器数量，这个参数控制的是卷积层的深度，因为层级针对每个过滤器都有一个激活映射

经常我们会让过滤器数量逐渐递增，因此第一个卷积层可能具有16个过滤器，第二层将具有32个，第三层将具有64个

当然，对于第一个卷积层，我们还要添加一个参数"input_shape"，假设我们的数据集由32*32的彩色图片组成

我们将在所有卷积层中使用relu激活函数，如果按照这一流程操作，这会让数组的深度逐渐增大，但是不会修改宽度和高度

输入层和该序列中的所有层级一样，宽和高为32，但是深度从输入层的3增大为16在增大为64

是的，我们希望增大深度，但是我们还希望减小高度和宽度，这时候最大池化层就派上用场了，它们通常紧跟在序列中的一个或两个卷积层后面

最常见的设置是，使用大小为2的过滤器，这样可以使空间维度，变成上一层级的一半，这样，通过组合使用卷积层和最大池化层

我们就能获得很深，且空间维度很小的数组
